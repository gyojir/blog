{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/mmx5El0Si/","result":{"data":{"markdownRemark":{"id":"0b3defb0-1c11-5e1b-931b-4aba0cc5626f","excerpt":"記事一覧 その1（調査編）　←ココ その2（USB編） その3（Nucleo編） その4（ケーブル編） その5（最終章） 背景 PlayStation(以下PS1)の雷電をやってたら親指が痛くなったので、アケコンが欲しくなった。\r\nただPS1用のアケコンを今更買ってもPS…","html":"<p>記事一覧</p>\n<ul>\n<li><a href=\"/posts/mmx5El0Si\">その1（調査編）</a>　←ココ</li>\n<li><a href=\"/posts/2stNWIQ7Z\">その2（USB編）</a></li>\n<li><a href=\"/posts/vORCOiXb_\">その3（Nucleo編）</a></li>\n<li><a href=\"/posts/2fluV8sa5\">その4（ケーブル編）</a></li>\n<li><a href=\"/posts/kuG0eT691\">その5（最終章）</a></li>\n</ul>\n<h1 id=\"背景\">背景</h1>\n<p>PlayStation(以下PS1)の雷電をやってたら親指が痛くなったので、アケコンが欲しくなった。\r\nただPS1用のアケコンを今更買ってもPS1でしか使えないし、もう生産されてないし、なんか嫌だったので、USBゲームパッドをPS1で使えるようにする変換器を買おうと思った。</p>\n<p>しかし、PSコン→USBの変換器はあるものの、USB→PSの変換器は無かった(2019/01/20 現在)。ので作ることにした。</p>\n<p>イメージとしては↓こんな感じ\r\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 372px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/9409d86f7130c334413a915dab200ce0/98b6e/pic01.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 206.75675675675674%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"pic01\" title=\"\" src=\"/static/9409d86f7130c334413a915dab200ce0/98b6e/pic01.png\" srcset=\"/static/9409d86f7130c334413a915dab200ce0/12f09/pic01.png 148w,\n/static/9409d86f7130c334413a915dab200ce0/e4a3f/pic01.png 295w,\n/static/9409d86f7130c334413a915dab200ce0/98b6e/pic01.png 372w\" sizes=\"(max-width: 372px) 100vw, 372px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span></p>\n<p>ちなみに記事タイトルのPSXというのは英語圏での呼び方？っぽい。<br>\n<span style=\"font-size: 0.8em;\"> （Sonyは日本ではPSXという名前でPS2互換のDVDレコーダーを出していたらしい。ややこしい）</span></p>\n<h1 id=\"調査\">調査</h1>\n<p>そもそもPS1はどうやってコントローラーと通信しているのか？<br>\n調べるといくつか良さげなページが見つかる（<a href=\"https://gamesx.com/controldata/psxcont/psxcont.htm\">ココ</a>とか<a href=\"https://www.electro-tech-online.com/threads/using-a-pic-to-emulate-a-psx-controller.29611\">ココ</a>とか）</p>\n<p>どうやらSPI通信を使っているらしい。<br>\n詳しくは上に挙げたページを見てもらうこととして、ざっくり説明すると</p>\n<ul>\n<li>通信はSPI通信</li>\n<li>各信号線名をSPIでの用語に置き換えると\n<ul>\n<li>DATA\t\t= MISO（マスターイン スレーブアウト）</li>\n<li>COMMAND\t= MOSI（マスターアウト スレーブイン)</li>\n<li>ATT\t\t= SS（スレーブセレクト）</li>\n<li>CLOCK \t= SCK（クロック）</li>\n</ul>\n</li>\n<li>通常のSPIに加えて、ACK信号によって通信を制御している。\n<ul>\n<li>1バイトのデータ送受信ごとにスレーブ側（コントローラー）がACKを少なくとも1クロック分（約2us）　LOWにする必要がある。</li>\n</ul>\n</li>\n<li>オーダーはLSB（一般的なSPI通信はMSB）</li>\n<li>CPOL = 1、CPHA = 1（MODE3）</li>\n</ul>\n<p>　→つまりクロックはアイドル状態でHIGH、クロックの立ち上がりでデータ読み込み</p>\n<h3 id=\"通信例デジタルコントローラーの場合\">通信例（デジタルコントローラーの場合）</h3>\n<ol>\n<li>PSから[0x01：start command]を受信。</li>\n<li>コントローラーはACKを一瞬LOWに</li>\n<li>PSから[0x42：request the data]を受信、</li>\n<li>同時にコントローラーからID[0x41：digital]を送信。（アナログコントローラーなら0x73）</li>\n<li>ACK</li>\n<li>コントローラーから[0x5A]を送信。</li>\n<li>ACK</li>\n<li>コントローラーからボタン情報（1バイト目）を送信。</li>\n<li>ACK</li>\n<li>コントローラーからボタン情報（2バイト目）を送信。</li>\n</ol>\n<p>…ということだそう。<br>\n<br>\r\n<br>\r\nつづく。</p>","frontmatter":{"title":"USB GamePad to PSX Controller Converter を作った(1)","date":"2019-01-20T23:15:10.000+09:00","description":"","tags":["製作記"]}}},"pageContext":{"slug":"/posts/mmx5El0Si","previous":null,"next":{"fields":{"slug":"/posts/2stNWIQ7Z"},"frontmatter":{"title":"USB GamePad to PSX Controller Converter を作った(2)"}}}},"staticQueryHashes":["2841359383","3115688470","3159585216","523898683","998201107"],"slicesMap":{}}